

@using DTO.Model;
@using BusinessLogic.BLL

@{
    @model Person

    var personBLL = new PersonBLL();


    ViewBag.Title = "PersonCreation";


    if (IsPost)
    {
        string personName = Request.Form["m.name"];


        <text>
            Du har skabt en person. Tillykke.
        </text>
    }
}


<h2>PersonCreation</h2>

@using (Html.BeginForm("AddPerson", "Person"))
{

    @Html.EditorFor(m => m.Name)
    @Html.ValidationMessageFor(m => m.Name)
    

    <button type="submit">Submit</button>
}



            


<table>
    <tr>
        <th>
            @Html.DisplayName("ID")
        </th>
        <th>
            @Html.DisplayName("Name")
        </th>
        <th>
            @Html.DisplayName("Actions")
        </th>
    </tr>
    <!-- Den her metode bruger getPerson på index for at fange et element, men getPerson kigger på PersonId, så fejler når ID ikke alle er inkrementeret med 1-->> 
    @for (int i = 1; i <= @personBLL.getPersonRange(); i++)
    {
        if (personBLL.getPerson(i).Name != null)
        {
                <tr>
                    <td>
                        @Html.DisplayFor(item => personBLL.getPerson(i).PersonId)
                    </td>
                    <td>
                        @Html.DisplayFor(item => personBLL.getPerson(i).Name)
                    </td>
                    <td>
                        @using (Html.BeginForm("RemovePerson", "Person", new { id = personBLL.getPerson(i).PersonId }))
                        {

                            <input type="hidden" value="@personBLL.getPerson(i).PersonId" />
                            <button type="submit" value="@personBLL.getPerson(i).PersonId">Remove</button>

                        }
                    </td>
                </tr>
        } 
    } 

</table>
 
